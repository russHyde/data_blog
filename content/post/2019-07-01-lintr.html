---
title: "`lintr`"
author: Russ Hyde
date: '2019-07-01'
slug: lintr
categories:
  - R
tags:
  - code-analysis
  - rstats
lastmod: '2019-07-01T18:25:47+01:00'
layout: post
type: post
highlight: no
---



<p><strong>Lint is the fluff on your clothes. Aside from all that fluff, you look fine.</strong></p>
<p><a href="https://github.com/jimhester/lintr"><code>lintr</code></a> (Author: Jim Hester) compares the
code in your files / packages against a style-guide. This helps ensure your
source code looks pretty consistent across your package(s).</p>
<p>Why is that useful?</p>
<p>It might not be. I couldn’t find many objective studies of code readability
amongst the thousands of opinion pieces that are online, so I can’t tell you
whether consistent styling is all <em>that</em> valuable. Hell, writing R code may
dull your consistency desires: in a typical script I might have a
<code>suppressPackageStartupMessages</code>, a <code>file.exists()</code>, a <code>read_tsv()</code>, and a
<code>Heatmap()</code> all present. It might be nice if things were less surprising, and
it always feels nicer to contribute to projects that are neatly formatted.</p>
<p>But this is your project we’re talking about. If you like your lines to be
at-most 100 characters wide, get in early and specify that the lines must be
at-most 100 characters wide. Similarly, if you like your object names to be
<code>snake_case</code>, write up a <code>.lintr</code> file that ensures any contributors have to
follow in your wake.</p>
<p><code>lintr</code> can be used on individual files (<code>.R</code>, <code>.Rmd</code>, <code>.Rnw</code> etc), directories
or packages. <em>Rstudio</em>, <em>vim</em>, <em>atom</em> etc can be integrated with <code>lintr</code> (see
the details at the <code>lintr</code> <a href="https://github.com/jimhester/lintr">github page</a>).
For example, through integration with <em>syntastic</em>, <em>vim</em> can run <code>lintr</code>
whenever you save a file, and if you run <code>lintr</code> within <em>Rstudio</em>, any lints
that are identified are put into the <code>Markers</code> pane.</p>
<p>To run <code>lintr</code> call:</p>
<pre><code>lintr::lint(some_file)</code></pre>
<p>Some example code, stored in a temporary file that we can refer to using <code>f</code></p>
<pre class="r"><code># -- My important script
abc &lt;- 123

def = 456

c(0);

# some unparseable code:
FALSE &lt;- TRUE

# some &lt;- &quot;commented code&quot;

ghi = 789

my_unportable_file &lt;- &quot;~/hello/world&quot;

snakeCase &lt;- runif(10)

dotty.variable.name &lt;- Sys.time()

my_s3_class.print &lt;- print

# Right assignment isn&#39;t caught yet
&quot;A most perilous&quot; -&gt; assignment</code></pre>
<p>We can now run <code>lintr</code> on that script, with the default choice of linting
functions, and view the style-issues that are returned.</p>
<pre class="r"><code>lintr::lint(filename = f)</code></pre>
<pre><code>/tmp/RtmpMNb3Xg/713e7159312e.R:4:5: style: Use &lt;-, not =, for assignment.
def = 456
    ^
/tmp/RtmpMNb3Xg/713e7159312e.R:11:3: style: Commented code should be removed.
# some &lt;- &quot;commented code&quot;
  ^~~~~~~~~~~~~~~~~~~~~~~~
/tmp/RtmpMNb3Xg/713e7159312e.R:13:5: style: Use &lt;-, not =, for assignment.
ghi = 789
    ^
/tmp/RtmpMNb3Xg/713e7159312e.R:15:24: warning: Do not use absolute paths.
my_unportable_file &lt;- &quot;~/hello/world&quot;
                       ^~~~~~~~~~~~~
/tmp/RtmpMNb3Xg/713e7159312e.R:17:1: style: Variable and function names should be all lowercase.
snakeCase &lt;- runif(10)
^~~~~~~~~
/tmp/RtmpMNb3Xg/713e7159312e.R:19:1: style: Words within variable and function names should be separated by &#39;_&#39; rather than &#39;.&#39;.
dotty.variable.name &lt;- Sys.time()
^~~~~~~~~~~~~~~~~~~</code></pre>
<pre class="r"><code># FYI:
installed.packages()[&quot;lintr&quot;, &quot;Version&quot;]</code></pre>
<pre><code>## [1] &quot;1.0.3&quot;</code></pre>
<!--
Simple example:

- New project
- add `my_script.R`
- define a few functions, trailing curly braces and absolute paths as examples
- since absolute paths is not a default linter in lintr::1.0.3, add this to
  the default_linters
- show how to drop lines from linting using `# nolint start` / `# nolint end`
- show how to define a linter
-->
<!--
Code smells that can be detected with `lintr`

- Commented-out code
- Inconsistency
- Clutter / Dead Code (via codetools::checkUsage())

But it can't prevent you choosing mysterious names

Architectural properties that `lintr` shines a light on:

- readability
    - keep those lines narrow

- security
    - catch unsafe extractions with `extraction_operator_linter`
    - prevent use of undesirable functions/operators/symbols

- deployability / usability
    - catch any non-portable paths using `absolute_path_linter` / `nonportable_path_linter`
-->
